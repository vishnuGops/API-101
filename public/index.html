<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API 101 - Interactive Playground</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        min-height: 100vh;
        color: #fff;
        padding: 20px;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
      }

      header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
      }

      header h1 {
        font-size: 2.5rem;
        background: linear-gradient(90deg, #00d2ff, #3a7bd5);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
      }

      header p {
        color: #8892b0;
        margin-top: 10px;
      }

      .main-content {
        display: grid;
        grid-template-columns: 350px 1fr;
        gap: 20px;
      }

      @media (max-width: 1000px) {
        .main-content {
          grid-template-columns: 1fr;
        }
      }

      /* Sidebar - Preset Examples */
      .sidebar {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 20px;
        height: fit-content;
      }

      .sidebar h2 {
        color: #00d2ff;
        font-size: 1.2rem;
        margin-bottom: 15px;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .example-group {
        margin-bottom: 20px;
      }

      .example-group h3 {
        color: #ccd6f6;
        font-size: 0.9rem;
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .example-btn {
        display: block;
        width: 100%;
        padding: 10px 15px;
        margin-bottom: 8px;
        background: rgba(58, 123, 213, 0.2);
        border: 1px solid rgba(58, 123, 213, 0.3);
        border-radius: 8px;
        color: #ccd6f6;
        cursor: pointer;
        text-align: left;
        font-size: 0.85rem;
        transition: all 0.3s ease;
      }

      .example-btn:hover {
        background: rgba(58, 123, 213, 0.4);
        transform: translateX(5px);
      }

      .example-btn .method {
        font-weight: bold;
        margin-right: 8px;
        padding: 2px 6px;
        border-radius: 4px;
        font-size: 0.7rem;
      }

      .method-get {
        background: #28a745;
        color: white;
      }
      .method-post {
        background: #007bff;
        color: white;
      }
      .method-put {
        background: #fd7e14;
        color: white;
      }
      .method-patch {
        background: #6f42c1;
        color: white;
      }
      .method-delete {
        background: #dc3545;
        color: white;
      }

      /* Main Panel */
      .main-panel {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }

      /* Request Builder */
      .request-builder {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 25px;
      }

      .request-builder h2 {
        color: #00d2ff;
        margin-bottom: 20px;
      }

      .form-row {
        display: flex;
        gap: 15px;
        margin-bottom: 15px;
      }

      .form-group {
        flex: 1;
      }

      .form-group label {
        display: block;
        color: #8892b0;
        margin-bottom: 5px;
        font-size: 0.9rem;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        width: 100%;
        padding: 12px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        color: #fff;
        font-family: "Fira Code", monospace;
        font-size: 0.9rem;
      }

      .form-group textarea {
        min-height: 120px;
        resize: vertical;
      }

      .form-group select {
        cursor: pointer;
      }

      .form-group input:focus,
      .form-group select:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #00d2ff;
      }

      .send-btn {
        background: linear-gradient(90deg, #00d2ff, #3a7bd5);
        border: none;
        padding: 15px 40px;
        border-radius: 8px;
        color: white;
        font-size: 1rem;
        font-weight: bold;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      .send-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(0, 210, 255, 0.3);
      }

      .send-btn:active {
        transform: translateY(0);
      }

      /* Response Panel */
      .response-panel {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 25px;
      }

      .response-panel h2 {
        color: #00d2ff;
        margin-bottom: 20px;
      }

      .response-meta {
        display: flex;
        gap: 20px;
        margin-bottom: 15px;
        flex-wrap: wrap;
      }

      .meta-item {
        background: rgba(0, 0, 0, 0.3);
        padding: 10px 20px;
        border-radius: 8px;
      }

      .meta-item span {
        color: #8892b0;
        font-size: 0.8rem;
      }

      .meta-item strong {
        display: block;
        font-size: 1.1rem;
        margin-top: 3px;
      }

      .status-2xx {
        color: #28a745;
      }
      .status-3xx {
        color: #fd7e14;
      }
      .status-4xx {
        color: #ffc107;
      }
      .status-5xx {
        color: #dc3545;
      }

      .response-body {
        background: rgba(0, 0, 0, 0.4);
        border-radius: 8px;
        padding: 20px;
        overflow-x: auto;
      }

      .response-body pre {
        margin: 0;
        font-family: "Fira Code", "Consolas", monospace;
        font-size: 0.85rem;
        line-height: 1.6;
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      /* Concepts Section */
      .concepts {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 15px;
        padding: 25px;
        margin-top: 30px;
      }

      .concepts h2 {
        color: #00d2ff;
        margin-bottom: 20px;
      }

      .concept-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
      }

      .concept-card {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
        padding: 20px;
        border-left: 4px solid #3a7bd5;
      }

      .concept-card h3 {
        color: #ccd6f6;
        margin-bottom: 10px;
        font-size: 1rem;
      }

      .concept-card p {
        color: #8892b0;
        font-size: 0.85rem;
        line-height: 1.6;
      }

      .concept-card code {
        background: rgba(0, 210, 255, 0.1);
        padding: 2px 6px;
        border-radius: 4px;
        font-family: monospace;
        color: #00d2ff;
      }

      /* Loading state */
      .loading {
        text-align: center;
        padding: 40px;
        color: #8892b0;
      }

      .loading::after {
        content: "";
        animation: dots 1.5s infinite;
      }

      @keyframes dots {
        0%,
        20% {
          content: ".";
        }
        40% {
          content: "..";
        }
        60%,
        100% {
          content: "...";
        }
      }

      /* Tabs for Headers/Body */
      .tabs {
        display: flex;
        gap: 5px;
        margin-bottom: 10px;
      }

      .tab-btn {
        padding: 8px 16px;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid transparent;
        border-radius: 6px 6px 0 0;
        color: #8892b0;
        cursor: pointer;
        transition: all 0.2s;
      }

      .tab-btn.active {
        background: rgba(0, 210, 255, 0.1);
        border-color: #00d2ff;
        color: #00d2ff;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Help text */
      .help-text {
        font-size: 0.8rem;
        color: #8892b0;
        margin-top: 5px;
        font-style: italic;
      }

      /* Explanation Panel */
      .explanation-panel {
        background: linear-gradient(
          135deg,
          rgba(0, 210, 255, 0.1) 0%,
          rgba(58, 123, 213, 0.1) 100%
        );
        border: 1px solid rgba(0, 210, 255, 0.3);
        border-radius: 15px;
        padding: 25px;
        position: relative;
        overflow: hidden;
      }

      .explanation-panel::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 4px;
        height: 100%;
        background: linear-gradient(180deg, #00d2ff, #3a7bd5);
      }

      .explanation-panel.hidden {
        display: none;
      }

      .explanation-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 15px;
      }

      .explanation-icon {
        font-size: 2rem;
      }

      .explanation-title {
        flex: 1;
      }

      .explanation-title h3 {
        color: #00d2ff;
        font-size: 1.1rem;
        margin-bottom: 3px;
      }

      .explanation-title .method-badge {
        display: inline-block;
        padding: 3px 10px;
        border-radius: 4px;
        font-size: 0.75rem;
        font-weight: bold;
        margin-right: 8px;
      }

      .explanation-content {
        color: #ccd6f6;
        line-height: 1.7;
      }

      .explanation-content p {
        margin-bottom: 12px;
      }

      .explanation-content .concept-highlight {
        background: rgba(0, 210, 255, 0.15);
        border-left: 3px solid #00d2ff;
        padding: 12px 15px;
        border-radius: 0 8px 8px 0;
        margin: 15px 0;
      }

      .explanation-content .concept-highlight strong {
        color: #00d2ff;
        display: block;
        margin-bottom: 5px;
      }

      .explanation-content code {
        background: rgba(0, 0, 0, 0.4);
        padding: 2px 8px;
        border-radius: 4px;
        font-family: "Fira Code", "Consolas", monospace;
        color: #64ffda;
        font-size: 0.85rem;
      }

      .explanation-content ul {
        margin: 10px 0;
        padding-left: 20px;
      }

      .explanation-content li {
        margin: 6px 0;
        color: #8892b0;
      }

      .explanation-content li strong {
        color: #ccd6f6;
      }

      .try-it-tip {
        background: rgba(100, 255, 218, 0.1);
        border: 1px solid rgba(100, 255, 218, 0.3);
        padding: 10px 15px;
        border-radius: 8px;
        margin-top: 15px;
        font-size: 0.85rem;
        color: #64ffda;
      }

      .try-it-tip::before {
        content: "üí° ";
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>üöÄ API 101 - Interactive Playground</h1>
        <p>
          Build, send, and explore HTTP requests to understand how APIs work!
        </p>
      </header>

      <div class="main-content">
        <!-- Sidebar with presets -->
        <div class="sidebar">
          <h2>üìö Quick Examples</h2>

          <div class="example-group">
            <h3>GET Requests</h3>
            <button class="example-btn" onclick="loadExample('getAllBooks')">
              <span class="method method-get">GET</span> All Books
            </button>
            <button class="example-btn" onclick="loadExample('getOneBook')">
              <span class="method method-get">GET</span> Single Book (ID: 1)
            </button>
            <button
              class="example-btn"
              onclick="loadExample('getBooksFiltered')"
            >
              <span class="method method-get">GET</span> Filter by Genre
            </button>
            <button class="example-btn" onclick="loadExample('searchBooks')">
              <span class="method method-get">GET</span> Search Books
            </button>
            <button class="example-btn" onclick="loadExample('getRandom')">
              <span class="method method-get">GET</span> Random Data
            </button>
          </div>

          <div class="example-group">
            <h3>POST Requests</h3>
            <button class="example-btn" onclick="loadExample('createBook')">
              <span class="method method-post">POST</span> Create Book
            </button>
            <button class="example-btn" onclick="loadExample('echoRequest')">
              <span class="method method-post">POST</span> Echo (Debug)
            </button>
            <button class="example-btn" onclick="loadExample('calculate')">
              <span class="method method-post">POST</span> Calculator
            </button>
          </div>

          <div class="example-group">
            <h3>PUT / PATCH Requests</h3>
            <button class="example-btn" onclick="loadExample('replaceBook')">
              <span class="method method-put">PUT</span> Replace Book
            </button>
            <button class="example-btn" onclick="loadExample('updateBook')">
              <span class="method method-patch">PATCH</span> Update Book
            </button>
          </div>

          <div class="example-group">
            <h3>DELETE Requests</h3>
            <button class="example-btn" onclick="loadExample('deleteBook')">
              <span class="method method-delete">DELETE</span> Delete Book
            </button>
          </div>

          <div class="example-group">
            <h3>Auth & Headers</h3>
            <button class="example-btn" onclick="loadExample('getUsers')">
              <span class="method method-get">GET</span> Users (No Auth)
            </button>
            <button class="example-btn" onclick="loadExample('getUsersAuth')">
              <span class="method method-get">GET</span> Users (With Auth)
            </button>
            <button
              class="example-btn"
              onclick="loadExample('createUserApiKey')"
            >
              <span class="method method-post">POST</span> Create User (API Key)
            </button>
          </div>

          <div class="example-group">
            <h3>Status Codes</h3>
            <button class="example-btn" onclick="loadExample('status200')">
              <span class="method method-get">GET</span> 200 OK
            </button>
            <button class="example-btn" onclick="loadExample('status404')">
              <span class="method method-get">GET</span> 404 Not Found
            </button>
            <button class="example-btn" onclick="loadExample('status500')">
              <span class="method method-get">GET</span> 500 Server Error
            </button>
          </div>
        </div>

        <!-- Main panel -->
        <div class="main-panel">
          <!-- Explanation Panel -->
          <div id="explanation-panel" class="explanation-panel hidden">
            <div class="explanation-header">
              <span class="explanation-icon" id="explanation-icon">üìö</span>
              <div class="explanation-title">
                <span
                  id="explanation-method-badge"
                  class="method-badge method-get"
                  >GET</span
                >
                <h3 id="explanation-title">Select an example to learn</h3>
              </div>
            </div>
            <div class="explanation-content" id="explanation-content">
              <p>
                Click on any example from the sidebar to see a detailed
                explanation of what it does and the concepts it demonstrates.
              </p>
            </div>
          </div>

          <!-- Request Builder -->
          <div class="request-builder">
            <h2>üì§ Request Builder</h2>

            <div class="form-row">
              <div class="form-group" style="flex: 0 0 150px">
                <label for="method">Method</label>
                <select id="method" onchange="updateMethodColor()">
                  <option value="GET">GET</option>
                  <option value="POST">POST</option>
                  <option value="PUT">PUT</option>
                  <option value="PATCH">PATCH</option>
                  <option value="DELETE">DELETE</option>
                </select>
              </div>
              <div class="form-group">
                <label for="url">URL</label>
                <input
                  type="text"
                  id="url"
                  value="/api/books"
                  placeholder="/api/books"
                />
              </div>
            </div>

            <div class="tabs">
              <button class="tab-btn active" onclick="switchTab('headers')">
                Headers
              </button>
              <button class="tab-btn" onclick="switchTab('body')">Body</button>
            </div>

            <div id="tab-headers" class="tab-content active">
              <div class="form-group">
                <textarea
                  id="headers"
                  placeholder='{"Content-Type": "application/json", "Authorization": "Bearer token"}'
                >
{
  "Content-Type": "application/json"
}</textarea
                >
                <p class="help-text">Enter headers as JSON object</p>
              </div>
            </div>

            <div id="tab-body" class="tab-content">
              <div class="form-group">
                <textarea
                  id="body"
                  placeholder='{"title": "My Book", "author": "John Doe"}'
                ></textarea>
                <p class="help-text">
                  Enter request body as JSON (for POST, PUT, PATCH)
                </p>
              </div>
            </div>

            <button class="send-btn" onclick="sendRequest()">
              üöÄ Send Request
            </button>
          </div>

          <!-- Response Panel -->
          <div class="response-panel">
            <h2>üì• Response</h2>

            <div class="response-meta">
              <div class="meta-item">
                <span>Status</span>
                <strong id="response-status">-</strong>
              </div>
              <div class="meta-item">
                <span>Time</span>
                <strong id="response-time">-</strong>
              </div>
              <div class="meta-item">
                <span>Size</span>
                <strong id="response-size">-</strong>
              </div>
            </div>

            <div class="response-body">
              <pre id="response-body">
Click "Send Request" or try one of the examples on the left to see the response here!</pre
              >
            </div>
          </div>
        </div>
      </div>

      <!-- Concepts Reference -->
      <div class="concepts">
        <h2>üìñ Quick Reference</h2>
        <div class="concept-grid">
          <div class="concept-card">
            <h3>üü¢ GET</h3>
            <p>
              Retrieves data from the server. Should not modify any data.
              Example: <code>GET /api/books</code>
            </p>
          </div>
          <div class="concept-card">
            <h3>üîµ POST</h3>
            <p>
              Creates new resources on the server. Sends data in the request
              body. Example: <code>POST /api/books</code>
            </p>
          </div>
          <div class="concept-card">
            <h3>üü† PUT</h3>
            <p>
              Replaces an entire resource. Requires ALL fields. Example:
              <code>PUT /api/books/1</code>
            </p>
          </div>
          <div class="concept-card">
            <h3>üü£ PATCH</h3>
            <p>
              Partially updates a resource. Only send fields you want to change.
              Example: <code>PATCH /api/books/1</code>
            </p>
          </div>
          <div class="concept-card">
            <h3>üî¥ DELETE</h3>
            <p>
              Removes a resource from the server. Example:
              <code>DELETE /api/books/1</code>
            </p>
          </div>
          <div class="concept-card">
            <h3>üìç Path Parameters</h3>
            <p>
              Dynamic parts of the URL that identify resources. Example:
              <code>/api/books/:id</code> where :id is 1, 2, etc.
            </p>
          </div>
          <div class="concept-card">
            <h3>‚ùì Query Parameters</h3>
            <p>
              Key-value pairs after <code>?</code> for filtering. Example:
              <code>/api/books?genre=Tech&limit=5</code>
            </p>
          </div>
          <div class="concept-card">
            <h3>üìã Headers</h3>
            <p>
              Metadata about the request like <code>Content-Type</code>,
              <code>Authorization</code>, and custom headers.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      const BASE_URL = "http://localhost:3000";

      // Preset examples
      const examples = {
        // GET examples
        getAllBooks: {
          method: "GET",
          url: "/api/books",
          headers: {},
          body: "",
        },
        getOneBook: {
          method: "GET",
          url: "/api/books/1",
          headers: {},
          body: "",
        },
        getBooksFiltered: {
          method: "GET",
          url: "/api/books?genre=Technology&sort=year",
          headers: {},
          body: "",
        },
        searchBooks: {
          method: "GET",
          url: "/api/search?q=API&minYear=2020",
          headers: {},
          body: "",
        },
        getRandom: {
          method: "GET",
          url: "/api/random",
          headers: {},
          body: "",
        },

        // POST examples
        createBook: {
          method: "POST",
          url: "/api/books",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(
            {
              title: "My New Book",
              author: "Your Name",
              year: 2024,
              genre: "Education",
            },
            null,
            2,
          ),
        },
        echoRequest: {
          method: "POST",
          url: "/api/echo",
          headers: {
            "Content-Type": "application/json",
            "X-Custom-Header": "Hello World!",
          },
          body: JSON.stringify(
            {
              message: "This will be echoed back!",
              nested: { data: [1, 2, 3] },
            },
            null,
            2,
          ),
        },
        calculate: {
          method: "POST",
          url: "/api/calculate",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(
            {
              operation: "multiply",
              a: 7,
              b: 8,
            },
            null,
            2,
          ),
        },

        // PUT/PATCH examples
        replaceBook: {
          method: "PUT",
          url: "/api/books/1",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(
            {
              title: "Completely New Title",
              author: "New Author",
              year: 2025,
              genre: "Science Fiction",
            },
            null,
            2,
          ),
        },
        updateBook: {
          method: "PATCH",
          url: "/api/books/2",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(
            {
              year: 2030,
            },
            null,
            2,
          ),
        },

        // DELETE example
        deleteBook: {
          method: "DELETE",
          url: "/api/books/3",
          headers: {},
          body: "",
        },

        // Auth examples
        getUsers: {
          method: "GET",
          url: "/api/users",
          headers: {},
          body: "",
        },
        getUsersAuth: {
          method: "GET",
          url: "/api/users",
          headers: { Authorization: "Bearer secret-token-123" },
          body: "",
        },
        createUserApiKey: {
          method: "POST",
          url: "/api/users",
          headers: {
            "Content-Type": "application/json",
            "X-API-Key": "my-secret-api-key",
          },
          body: JSON.stringify(
            {
              username: "newuser",
              email: "newuser@example.com",
              role: "student",
            },
            null,
            2,
          ),
        },

        // Status code examples
        status200: {
          method: "GET",
          url: "/api/status/200",
          headers: {},
          body: "",
        },
        status404: {
          method: "GET",
          url: "/api/status/404",
          headers: {},
          body: "",
        },
        status500: {
          method: "GET",
          url: "/api/status/500",
          headers: {},
          body: "",
        },
      };

      // Educational explanations for each example
      const explanations = {
        getAllBooks: {
          icon: "üìñ",
          title: "Get All Books",
          content: `
            <p>This is the most basic type of API request - a <strong>GET request</strong> to retrieve a list of resources.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: GET Requests</strong>
              GET requests are used to <em>read</em> data from a server. They should never modify data - they're "safe" and "idempotent" (calling them multiple times has the same effect as calling once).
            </div>
            <p>The URL <code>/api/books</code> follows REST conventions where the resource name is plural. The server will return all books in the database.</p>
            <div class="try-it-tip">Try adding query parameters like <code>?genre=Technology</code> or <code>?limit=2</code> to filter results!</div>
          `,
        },
        getOneBook: {
          icon: "üîç",
          title: "Get Single Book by ID",
          content: `
            <p>This demonstrates <strong>path parameters</strong> - dynamic values embedded directly in the URL path.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Path Parameters</strong>
              In <code>/api/books/1</code>, the "1" is a path parameter identifying a specific resource. The server reads this as: "Give me the book with ID 1".
            </div>
            <p>Path parameters are perfect for identifying specific resources. Compare this to query parameters which are better for filtering or optional settings.</p>
            <ul>
              <li><strong>Path param:</strong> <code>/books/1</code> ‚Üí identifies ONE specific book</li>
              <li><strong>Query param:</strong> <code>/books?author=John</code> ‚Üí filters MANY books</li>
            </ul>
            <div class="try-it-tip">Try changing the ID in the URL to see different books or a 404 error for non-existent IDs!</div>
          `,
        },
        getBooksFiltered: {
          icon: "üîé",
          title: "Filter with Query Parameters",
          content: `
            <p>This shows how <strong>query parameters</strong> work - they come after the <code>?</code> in a URL and let you filter, sort, or customize the response.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Query Parameters</strong>
              Query params are key-value pairs after <code>?</code>, separated by <code>&</code>. They're optional and don't change the resource's identity.
              <br><br>
              Format: <code>?key1=value1&key2=value2</code>
            </div>
            <p>In this example:</p>
            <ul>
              <li><code>genre=Technology</code> ‚Üí filters to only Technology books</li>
              <li><code>sort=year</code> ‚Üí sorts results by publication year</li>
            </ul>
            <div class="try-it-tip">Try combining different parameters: <code>?genre=Programming&limit=1&sort=title</code></div>
          `,
        },
        searchBooks: {
          icon: "üîç",
          title: "Search Endpoint",
          content: `
            <p>Search APIs typically use GET requests with query parameters to specify search criteria.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Search APIs</strong>
              Search endpoints often accept multiple optional parameters. The <code>q</code> parameter is a common convention for the search query text.
            </div>
            <p>This search endpoint supports:</p>
            <ul>
              <li><code>q</code> ‚Üí search text (matches title, author, genre)</li>
              <li><code>minYear</code> / <code>maxYear</code> ‚Üí date range filtering</li>
              <li><code>author</code> ‚Üí filter by specific author</li>
            </ul>
            <div class="try-it-tip">Try searching with different criteria to see how results change!</div>
          `,
        },
        getRandom: {
          icon: "üé≤",
          title: "Random Data Endpoint",
          content: `
            <p>This demonstrates that APIs can return <strong>dynamic, non-cacheable data</strong> that changes with each request.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Dynamic Responses</strong>
              Not all API responses are static! This endpoint generates new random values each time. In real apps, this pattern is used for things like generating unique IDs, getting random recommendations, or creating tokens.
            </div>
            <p>Each call returns:</p>
            <ul>
              <li>A random number</li>
              <li>A random quote</li>
              <li>A randomly generated UUID</li>
              <li>Current timestamp</li>
            </ul>
            <div class="try-it-tip">Click "Send Request" multiple times to see different random values!</div>
          `,
        },
        createBook: {
          icon: "‚ú®",
          title: "Create a New Book",
          content: `
            <p>This demonstrates <strong>POST requests</strong> - used to create new resources on the server.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: POST Requests</strong>
              POST sends data in the <strong>request body</strong> to create something new. Unlike GET, POST can (and should) modify server data. Each POST typically creates a new resource with a unique ID.
            </div>
            <p>Important parts of this request:</p>
            <ul>
              <li><strong>Method:</strong> POST (tells server we're creating)</li>
              <li><strong>Content-Type header:</strong> Tells server the body is JSON</li>
              <li><strong>Body:</strong> The actual book data to create</li>
            </ul>
            <p>The server responds with <code>201 Created</code> status and returns the created book (including its new ID).</p>
            <div class="try-it-tip">Try modifying the book data in the Body tab and create your own book!</div>
          `,
        },
        echoRequest: {
          icon: "ü™û",
          title: "Echo Request (Debug Tool)",
          content: `
            <p>The echo endpoint is a <strong>debugging tool</strong> that shows you exactly what the server received from your request.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Request Anatomy</strong>
              Every HTTP request has: method, URL, headers, and optionally a body. The echo endpoint mirrors these back so you can verify what you're sending.
            </div>
            <p>This is incredibly useful for:</p>
            <ul>
              <li>Debugging why a request isn't working</li>
              <li>Verifying headers are being sent correctly</li>
              <li>Understanding how your client formats requests</li>
              <li>Learning the structure of HTTP requests</li>
            </ul>
            <div class="try-it-tip">Add custom headers or modify the body to see how they appear on the server!</div>
          `,
        },
        calculate: {
          icon: "üßÆ",
          title: "Calculator API",
          content: `
            <p>This shows how APIs can perform <strong>operations with structured input</strong>.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: RPC-style APIs</strong>
              While REST focuses on resources (nouns), some endpoints are more action-oriented (verbs). The calculator takes an operation and operands, performs the calculation, and returns the result.
            </div>
            <p>The request body contains:</p>
            <ul>
              <li><code>operation</code> ‚Üí "add", "subtract", "multiply", or "divide"</li>
              <li><code>a</code> and <code>b</code> ‚Üí the numbers to calculate</li>
            </ul>
            <div class="try-it-tip">Try different operations! What happens if you divide by zero?</div>
          `,
        },
        replaceBook: {
          icon: "üîÑ",
          title: "Replace Book (PUT)",
          content: `
            <p>PUT requests <strong>completely replace</strong> a resource. You must provide ALL fields, not just the ones you want to change.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: PUT vs PATCH</strong>
              <strong>PUT</strong> = Replace EVERYTHING (like overwriting a file)<br>
              <strong>PATCH</strong> = Update SOME fields (like editing specific lines)<br><br>
              PUT is "idempotent" ‚Üí calling it multiple times with the same data has the same result.
            </div>
            <p>If you forget a field with PUT, it might be set to null or cause an error. This example replaces ALL properties of book #1.</p>
            <div class="try-it-tip">Try removing a field from the body to see the validation error!</div>
          `,
        },
        updateBook: {
          icon: "‚úèÔ∏è",
          title: "Update Book (PATCH)",
          content: `
            <p>PATCH requests make <strong>partial updates</strong> - only the fields you include will be changed.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Partial Updates</strong>
              With PATCH, you only send what you want to change. Other fields remain untouched. This is more efficient when you only need to update one property.
            </div>
            <p>In this example, we're ONLY updating the <code>year</code> field. The title, author, and genre stay exactly as they were.</p>
            <p>The response shows both the previous and updated values so you can see what changed.</p>
            <div class="try-it-tip">Try adding more fields to the body to update multiple properties at once!</div>
          `,
        },
        deleteBook: {
          icon: "üóëÔ∏è",
          title: "Delete a Book",
          content: `
            <p>DELETE requests remove a resource from the server.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: DELETE Requests</strong>
              DELETE is another "idempotent" method - deleting the same resource twice has the same end result (the resource is gone). The second delete typically returns a 404.
            </div>
            <p>Important considerations:</p>
            <ul>
              <li>DELETE requests usually don't have a body</li>
              <li>The resource ID is in the URL path</li>
              <li>Successful deletion often returns 200 (with details) or 204 (no content)</li>
            </ul>
            <div class="try-it-tip">After deleting, try to GET the same book - you'll see a 404 error!</div>
          `,
        },
        getUsers: {
          icon: "üîí",
          title: "Users (No Authentication)",
          content: `
            <p>This demonstrates what happens when you try to access a <strong>protected endpoint without authentication</strong>.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: 401 Unauthorized</strong>
              When an API requires authentication and you don't provide credentials, it returns <code>401 Unauthorized</code>. This is different from 403 Forbidden (you have credentials, but no permission).
            </div>
            <p>The /api/users endpoint is protected - you need to prove who you are before accessing user data.</p>
            <div class="try-it-tip">Compare this response with "Users (With Auth)" to see the difference!</div>
          `,
        },
        getUsersAuth: {
          icon: "üîì",
          title: "Users (With Authentication)",
          content: `
            <p>This shows successful <strong>authentication using a Bearer token</strong> in the Authorization header.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Bearer Token Authentication</strong>
              The <code>Authorization: Bearer [token]</code> header is a common pattern. "Bearer" means "whoever bears (carries) this token is authorized." In real apps, these tokens are typically JWTs (JSON Web Tokens).
            </div>
            <p>The flow:</p>
            <ul>
              <li>User logs in ‚Üí receives a token</li>
              <li>User includes token in subsequent requests</li>
              <li>Server verifies token ‚Üí grants or denies access</li>
            </ul>
            <div class="try-it-tip">Try changing the token value to see a 403 Forbidden error!</div>
          `,
        },
        createUserApiKey: {
          icon: "üîë",
          title: "Create User (API Key Auth)",
          content: `
            <p>This demonstrates another authentication pattern: <strong>API Keys</strong> sent via custom headers.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: API Key Authentication</strong>
              API keys are often used for service-to-service communication. Unlike user tokens, API keys typically identify an application, not a specific user. They're sent in custom headers like <code>X-API-Key</code>.
            </div>
            <p>Two authentication methods compared:</p>
            <ul>
              <li><strong>Bearer Token:</strong> Usually represents a logged-in user session</li>
              <li><strong>API Key:</strong> Usually identifies an application or service</li>
            </ul>
            <div class="try-it-tip">Try the request without the X-API-Key header to see it fail!</div>
          `,
        },
        status200: {
          icon: "‚úÖ",
          title: "Status 200 OK",
          content: `
            <p>HTTP <code>200 OK</code> is the standard success response code.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Status Code Categories</strong>
              <strong>2xx</strong> = Success (200 OK, 201 Created, 204 No Content)<br>
              <strong>3xx</strong> = Redirection (301 Moved, 304 Not Modified)<br>
              <strong>4xx</strong> = Client Error (400 Bad Request, 401, 403, 404)<br>
              <strong>5xx</strong> = Server Error (500, 502, 503)
            </div>
            <p>200 means: "Your request was successful and here's your data." It's the most common status code you'll see.</p>
            <div class="try-it-tip">Try other status codes like /api/status/201 or /api/status/418!</div>
          `,
        },
        status404: {
          icon: "‚ùì",
          title: "Status 404 Not Found",
          content: `
            <p>HTTP <code>404 Not Found</code> means the requested resource doesn't exist.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: 404 Not Found</strong>
              404 is a CLIENT error (4xx) - it means you asked for something that doesn't exist. This could be a typo in your URL, a deleted resource, or an invalid ID.
            </div>
            <p>Common causes of 404:</p>
            <ul>
              <li>Wrong URL or endpoint</li>
              <li>Resource was deleted</li>
              <li>Invalid ID (e.g., /books/99999)</li>
              <li>Typo in the path</li>
            </ul>
            <div class="try-it-tip">Try GET /api/books/99999 to see a real 404 from a missing book!</div>
          `,
        },
        status500: {
          icon: "üí•",
          title: "Status 500 Server Error",
          content: `
            <p>HTTP <code>500 Internal Server Error</code> means something went wrong on the server.</p>
            <div class="concept-highlight">
              <strong>üéØ Key Concept: Server Errors (5xx)</strong>
              5xx errors are SERVER problems, not your fault. The server received your request correctly but couldn't process it due to a bug, crash, or system issue. Retry might help!
            </div>
            <p>As a client, when you see 500:</p>
            <ul>
              <li>Your request was probably fine</li>
              <li>The server had an internal problem</li>
              <li>You might retry after a delay</li>
              <li>Contact the API provider if it persists</li>
            </ul>
            <div class="try-it-tip">In production, 500 errors are logged for developers to investigate.</div>
          `,
        },
      };

      function loadExample(name) {
        const example = examples[name];
        if (!example) return;

        document.getElementById("method").value = example.method;
        document.getElementById("url").value = example.url;
        document.getElementById("headers").value = Object.keys(example.headers)
          .length
          ? JSON.stringify(example.headers, null, 2)
          : "{}";
        document.getElementById("body").value = example.body;

        updateMethodColor();

        // Update explanation panel
        const explanation = explanations[name];
        if (explanation) {
          const panel = document.getElementById("explanation-panel");
          panel.classList.remove("hidden");
          document.getElementById("explanation-icon").textContent =
            explanation.icon;
          document.getElementById("explanation-title").textContent =
            explanation.title;
          document.getElementById("explanation-content").innerHTML =
            explanation.content;

          // Update method badge
          const badge = document.getElementById("explanation-method-badge");
          badge.textContent = example.method;
          badge.className =
            "method-badge method-" + example.method.toLowerCase();
        }

        // Auto-switch to body tab if there's body content
        if (example.body) {
          switchTab("body");
        } else {
          switchTab("headers");
        }
      }

      function switchTab(tabName) {
        document
          .querySelectorAll(".tab-btn")
          .forEach((btn) => btn.classList.remove("active"));
        document
          .querySelectorAll(".tab-content")
          .forEach((content) => content.classList.remove("active"));

        event.target.classList.add("active");
        document.getElementById(`tab-${tabName}`).classList.add("active");
      }

      function updateMethodColor() {
        const method = document.getElementById("method").value;
        const select = document.getElementById("method");

        select.style.borderColor =
          {
            GET: "#28a745",
            POST: "#007bff",
            PUT: "#fd7e14",
            PATCH: "#6f42c1",
            DELETE: "#dc3545",
          }[method] || "#00d2ff";
      }

      async function sendRequest() {
        const method = document.getElementById("method").value;
        const url = document.getElementById("url").value;
        let headers = {};
        let body = document.getElementById("body").value;

        // Parse headers
        try {
          const headersText = document.getElementById("headers").value;
          if (headersText.trim()) {
            headers = JSON.parse(headersText);
          }
        } catch (e) {
          document.getElementById("response-body").textContent =
            "‚ùå Error: Invalid JSON in headers\n\n" + e.message;
          return;
        }

        // Prepare request options
        const options = {
          method,
          headers,
        };

        // Add body for methods that support it
        if (["POST", "PUT", "PATCH"].includes(method) && body.trim()) {
          try {
            JSON.parse(body); // Validate JSON
            options.body = body;
          } catch (e) {
            document.getElementById("response-body").textContent =
              "‚ùå Error: Invalid JSON in body\n\n" + e.message;
            return;
          }
        }

        // Show loading
        document.getElementById("response-body").innerHTML =
          '<div class="loading">Sending request</div>';
        document.getElementById("response-status").textContent = "...";
        document.getElementById("response-status").className = "";
        document.getElementById("response-time").textContent = "...";
        document.getElementById("response-size").textContent = "...";

        const startTime = performance.now();

        try {
          const response = await fetch(BASE_URL + url, options);
          const endTime = performance.now();
          const duration = Math.round(endTime - startTime);

          const responseText = await response.text();
          let responseData;

          try {
            responseData = JSON.parse(responseText);
            responseData = JSON.stringify(responseData, null, 2);
          } catch {
            responseData = responseText;
          }

          // Update status
          const statusEl = document.getElementById("response-status");
          statusEl.textContent = `${response.status} ${response.statusText}`;
          statusEl.className = getStatusClass(response.status);

          // Update time
          document.getElementById("response-time").textContent =
            `${duration}ms`;

          // Update size
          const size = new Blob([responseText]).size;
          document.getElementById("response-size").textContent =
            formatBytes(size);

          // Update body
          document.getElementById("response-body").textContent = responseData;
        } catch (error) {
          document.getElementById("response-status").textContent = "Error";
          document.getElementById("response-status").className = "status-5xx";
          document.getElementById("response-time").textContent = "-";
          document.getElementById("response-size").textContent = "-";
          document.getElementById("response-body").textContent =
            `‚ùå Request Failed!\n\n${error.message}\n\nüí° Make sure the server is running:\n   npm start`;
        }
      }

      function getStatusClass(status) {
        if (status >= 200 && status < 300) return "status-2xx";
        if (status >= 300 && status < 400) return "status-3xx";
        if (status >= 400 && status < 500) return "status-4xx";
        return "status-5xx";
      }

      function formatBytes(bytes) {
        if (bytes === 0) return "0 B";
        const k = 1024;
        const sizes = ["B", "KB", "MB"];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + " " + sizes[i];
      }

      // Initialize
      updateMethodColor();
    </script>
  </body>
</html>
